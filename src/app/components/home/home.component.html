<section class="home">
  <div class="home__main-product">
    <div class="home__main-product-background">
      <img src="assets/images/onyx.png" alt="kitsoone Onyx Keyboard">
    </div>
    <div class="home__main-product-content page-width">
      <h1>Kitsoone Onyx</h1>       
      <div class="home__main-product-features">
        <span>Split keyboard</span> | <span>Wireless</span> | <span>Ergonomico</span> | <span>RGB</span>
      </div>     
      <button class="home__main-product-buy-button">Compra ahora</button>
    </div>
  </div>
  <div class="home__products-container page-width">
    <h2>Nuevos Productos</h2>
    <div class="home__products-container-list">
      <!-- Loading state -->
      @if (isLoadingProducts) {
        <div class="text-center p-4">
          <i class="pi pi-spin pi-spinner text-2xl"></i>
          <p class="mt-2">Cargando productos...</p>
        </div>
      }
      
      <!-- Error state -->
      @if (productsError && !isLoadingProducts) {
        <div class="text-center p-4 text-red-500">
          <i class="pi pi-exclamation-triangle text-2xl"></i>
          <p class="mt-2">{{ productsError }}</p>
          <p class="text-sm mt-1">Mostrando productos de demostración</p>
        </div>
      }

      <!-- Products carousel -->
      @if (!isLoadingProducts) {
        <p-carousel [value]="products" [showNavigators]="shouldShowNavigators" [showIndicators]="false" [numVisible]="4" [numScroll]="1" [circular]="false" [responsiveOptions]="carouselResponsiveOptions">
            <ng-template let-product #item>
                <div class="border border-surface rounded-border m-2 p-4">
                    <div class="mb-4">
                        <div class="relative mx-auto">
                            <img [src]="product.imageUrl" [alt]="product.name" class="w-full rounded-border" />                         
                        </div>
                    </div>
                    <div class="mb-4 font-medium">{{ product.name || 'Product Name' }}</div>
                    <div class="flex justify-between items-center">
                        <div class="mt-0 font-semibold text-xl">${{ product.price ? product.price.toFixed(2) : '0.00' }}</div>                     
                    </div>
                </div>
            </ng-template>
        </p-carousel>
      }     
    </div>
  </div>  
  <div class="home__community-section">
    <div class="home__community-content page-width">
      <h2>Únete a nuestra comunidad</h2>
      <p>Conecta con otros entusiastas de teclados, comparte tus builds, obtén ayuda técnica y mantente al día con las últimas novedades de Kitsoone.</p>
      <a [href]="discordUrl" target="_blank" rel="noopener noreferrer" class="home__discord-button">
        <i class="pi pi-discord"></i>
        <span>Unirse a Discord</span>
      </a>
    </div>
  </div>
  <div class="home__showcase-container page-width">
    <h2>Showcase de nuestros usuarios</h2>    
    <button class="custom-swiper-prev"><i class="pi pi-chevron-left"></i></button>
    <button class="custom-swiper-next"><i class="pi pi-chevron-right"></i></button>
    <swiper-container     
      navigation-prev-el=".custom-swiper-prev"
      navigation-next-el=".custom-swiper-next"         
      slides-per-view="auto"
      space-between="30"     >      
      @for (build of showcase; track build.id) {
        <swiper-slide lazy="true">
              <img [src]="build.image" class="rounded-border" loading="lazy"/>                         
        </swiper-slide>
      }
    </swiper-container>    
  </div>
  
</section>